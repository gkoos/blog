<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Node.js vs Go in Practice: Performance Comparison of chaos-proxy and chaos-proxy-go</title>
  <meta name="description" content="Compare the performance of chaos-proxy in Node.js vs Go for HTTP chaos testing. See benchmarks, results, and practical advice for choosing the right proxy for resilient full stack app testing.">

  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://gaborkoos.com">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Node.js vs Go in Practice: Performance Comparison of chaos-proxy and chaos-proxy-go">
  <meta property="og:description" content="Compare the performance of chaos-proxy in Node.js vs Go for HTTP chaos testing. See benchmarks, results, and practical advice for choosing the right proxy for resilient full stack app testing.">
  <meta property="og:image" content="https://opengraph.b-cdn.net/production/images/74740c4e-d40d-49be-83fb-7170084dbda1.png?token=3Pxj4Ccc7Z93zXgN6-HhJM8U3lpcnqtTs8xNIPoUzF4&height=614&width=620&expires=33290472379">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="gaborkoos.com">
  <meta property="twitter:url" content="https://gaborkoos.com">
  <meta name="twitter:title" content="Node.js vs Go in Practice: Performance Comparison of chaos-proxy and chaos-proxy-go">
  <meta name="twitter:description" content="Compare the performance of chaos-proxy in Node.js vs Go for HTTP chaos testing. See benchmarks, results, and practical advice for choosing the right proxy for resilient full stack app testing.">
  <meta name="twitter:image" content="https://opengraph.b-cdn.net/production/images/74740c4e-d40d-49be-83fb-7170084dbda1.png?token=3Pxj4Ccc7Z93zXgN6-HhJM8U3lpcnqtTs8xNIPoUzF4&height=614&width=620&expires=33290472379">

  <!-- Meta Tags Generated via https://www.opengraph.xyz -->

  <!-- Analytics -->
  <script data-goatcounter="https://gkoos.goatcounter.com/count"  async src="//gc.zgo.at/count.js"></script>

  
  
  


  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
  <link rel="stylesheet" href="/assets/css/styles.css" />
  <link rel="stylesheet" href="/assets/css/vendor/prism-tomorrow.css" />
  <link rel="stylesheet" href="/assets/css/fix-inline-code.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-['Inter',system-ui,sans-serif] antialiased leading-relaxed">
  <!-- Header/Navigation with Theme Switcher -->
  <header class="border-b border-gray-100 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 sticky top-0 z-10 transition-colors">
    <div class="max-w-4xl mx-auto px-6 py-6">
      <nav class="flex items-center justify-between">
        <div>
          <a href="/" class="text-base sm:text-xl font-semibold text-gray-900 dark:text-white hover:text-gray-700 dark:hover:text-gray-300 transition-colors mr-4 sm:mr-0">
            a developer blog
          </a>
        </div>
        <div class="flex items-center space-x-6">
          <a href="/" class="text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">Home</a>
          <a href="https://gaborkoos.com" class="text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">About</a>
          <a href="/categories" class="text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">Categories</a>
          <a href="/feed.xml" class="text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors">RSS</a>
          <!-- Theme Switcher Button -->
          <button id="theme-toggle" aria-label="Toggle dark mode" class="ml-4 p-2 rounded focus:outline-none bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200 transition-colors" style="display:inline-block;">
            <span id="theme-toggle-light" style="display:none">ðŸŒž</span>
            <span id="theme-toggle-dark" style="display:none">ðŸŒ™</span>
          </button>
        </div>
      </nav>
    </div>
  </header>


  <main class="max-w-4xl mx-auto px-6 py-12 transition-colors">
  <div class="prose prose-lg prose-gray dark:prose-invert max-w-none">
    
<article>
  <h1 class="text-3xl font-bold mb-4">Node.js vs Go in Practice: Performance Comparison of chaos-proxy and chaos-proxy-go</h1>
  <div class="flex items-center space-x-4 text-sm text-gray-500 mb-6">
    <time datetime="2025-10-11T00:00:00.000Z">Sat Oct 11 2025</time>
    
    
      <span class="text-gray-300">â€¢</span>
      <div class="flex flex-wrap gap-2">
        
          <div class="flex items-center rounded-full bg-teal-500 text-white dark:bg-teal-400/10 dark:text-teal-300 px-3 py-1 text-xs font-medium leading-5">testing</div>
        
          <div class="flex items-center rounded-full bg-teal-500 text-white dark:bg-teal-400/10 dark:text-teal-300 px-3 py-1 text-xs font-medium leading-5">javascript</div>
        
          <div class="flex items-center rounded-full bg-teal-500 text-white dark:bg-teal-400/10 dark:text-teal-300 px-3 py-1 text-xs font-medium leading-5">typescript</div>
        
          <div class="flex items-center rounded-full bg-teal-500 text-white dark:bg-teal-400/10 dark:text-teal-300 px-3 py-1 text-xs font-medium leading-5">golang</div>
        
      </div>
    
  </div>
  <div class="prose dark:prose-invert max-w-none">
    <p>The original <a href="https://github.com/fetch-kit/chaos-proxy">chaos-proxy</a> was developed in Node.js, primarily to support testing of TypeScript and JavaScript applications. Node's event-driven model and npm ecosystem made it a natural fit for rapid development and for supporting custom middleware written in JS/TS - features that are especially valuable for frontend and full-stack teams.</p>
<p>However, unlike <a href="https://github.com/fetch-kit/chaos-fetch">chaos-fetch</a>, another testing tool, which is tightly coupled to JS runtimes, chaos-proxy's core concept is language-agnostic: it's a standalone HTTP proxy for injecting chaos (latency, failures, header/body transforms, etc.) into any API traffic. This opens the door to reimplementing the proxy in a language better suited for raw performance and concurrency, like Go.</p>
<p>In this article, I benchmark the original Node.js/Express-based chaos-proxy against a new Go implementation, chaos-proxy-go. While the Go version can't run custom JS/TS middleware, it aims to deliver the same core chaos features with much higher throughput and lower latency. Using a <a href="https://caddyserver.com/">Caddy</a> server as the backend and the <a href="https://github.com/rakyll/hey">hey</a> tool for load testing, I'll compare both proxies (and direct Caddy) in a controlled environment, sharing all configs and results for reproducibility.</p>
<h2 id="system-%26-test-environment" tabindex="-1"><a class="header-anchor" href="#system-%26-test-environment">System &amp; Test Environment</a></h2>
<p>To ensure a fair and reproducible comparison, all benchmarks were run locally on the same machine with minimal background activity. Below are the full system specifications and environment details:</p>
<h3 id="system-specs%3A" tabindex="-1"><a class="header-anchor" href="#system-specs%3A">System Specs:</a></h3>
<ul>
<li>CPU: AMD Ryzen 7 5800H with Radeon Graphics</li>
<li>Cores: 8 physical cores</li>
<li>Threads: 16 logical processors (SMT enabled)</li>
<li>Base Clock: 3.2 GHz</li>
<li>RAM: 16GB DDR4</li>
<li>Operating System: Windows 10 Home 22H2 64-bit</li>
</ul>
<h3 id="test-setup%3A" tabindex="-1"><a class="header-anchor" href="#test-setup%3A">Test Setup:</a></h3>
<p>All tests were performed on localhost to eliminate network variability.
The backend API was served by a Caddy server running on port 8080.
Both chaos-proxy (Node.js) and chaos-proxy-go were configured to proxy requests to the Caddy backend.
No other heavy processes were running during the benchmarks.
Each test scenario was run multiple times, and the best/average results are reported.
Software Versions:</p>
<ul>
<li>Node.js: v24.2.0</li>
<li>Go: go1.25.1 windows/amd64</li>
<li>Caddy: v2.10.2 h1:g/gTYjGMD0dec+UgMw8SnfmJ3I9+M2TdvoRL/Ovu6U8=</li>
<li>hey: v0.1.4</li>
<li>chaos-proxy: v2.0.0 (latest at 11/10/2025)</li>
<li>chaos-proxy-go: v0.0.5 (latest at 11/10/2025)</li>
</ul>
<h2 id="backend-setup%3A-caddy-server" tabindex="-1"><a class="header-anchor" href="#backend-setup%3A-caddy-server">Backend Setup: Caddy Server</a></h2>
<p>For all benchmarks, I used a Caddy server as the backend API. Caddy is a modern, fast, and easy-to-configure web server, making it ideal for consistent, low-overhead benchmarking.</p>
<p>Caddyfile Configuration:</p>
<pre class="language-caddy"><code class="language-caddy"># Caddyfile
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span> <span class="token punctuation">{</span>
	# Add <span class="token constant">CORS</span> headers <span class="token keyword">for</span> all responses
	header <span class="token punctuation">{</span>
		Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin <span class="token operator">*</span>
		Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Methods <span class="token string">"GET, POST, PUT, DELETE, OPTIONS"</span>
		Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Headers <span class="token string">"Content-Type, Authorization"</span>
		Content<span class="token operator">-</span>Type application<span class="token operator">/</span>json
	<span class="token punctuation">}</span>

	# Simple <span class="token constant">JSON</span> <span class="token constant">API</span> endpoint	
	route <span class="token operator">/</span>api<span class="token operator">/</span>hello <span class="token punctuation">{</span>
		respond <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{
		"message": "Hello, World!",
		"server": "Caddy",
		"timestamp": "2025-10-03T22:00:00Z"}
		</span><span class="token template-punctuation string">`</span></span> <span class="token number">200</span>
	<span class="token punctuation">}</span>

	# Log all requests
	log <span class="token punctuation">{</span>
		output file access<span class="token punctuation">.</span>log
		format json
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>We use a single <code>/api/hello</code> endpoint for benchmarking that returns a simple JSON response. The CORS headers ensure compatibility with any client, and logging is enabled for potential further analysis.</p>
<p>This setup ensures that the backend is not a bottleneck and that all proxy benchmarks reflect the overhead of the proxy layer itself.</p>
<h2 id="proxy-setups" tabindex="-1"><a class="header-anchor" href="#proxy-setups">Proxy Setups</a></h2>
<p>To compare the performance impact of each proxy implementation, I tested three scenarios:</p>
<h3 id="1.-direct-to-caddy-(baseline)" tabindex="-1"><a class="header-anchor" href="#1.-direct-to-caddy-(baseline)">1. Direct to Caddy (Baseline)</a></h3>
<p>Requests are sent straight to the Caddy backend at <code>http://localhost:8080/api/hello</code>, with no proxy in between. This provides a baseline for the lowest possible latency and highest throughput.</p>
<h3 id="2.-chaos-proxy-(node.js%2Fkoa)" tabindex="-1"><a class="header-anchor" href="#2.-chaos-proxy-(node.js%2Fkoa)">2. chaos-proxy (Node.js/Koa)</a></h3>
<p>The original chaos-proxy is a Node.js/Express-based HTTP proxy designed for injecting chaos into API traffic.</p>
<p>For this benchmark:</p>
<ul>
<li>chaos-proxy listens on http://localhost:5000</li>
<li>It is configured to forward requests to the Caddy backend at http://localhost:8080</li>
<li>No custom JS/TS middleware was used for these tests</li>
</ul>
<p>The config file (<code>chaos.yaml</code>) used is simply</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token literal-property property">target</span><span class="token operator">:</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">8080</span>
<span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">5000</span>
</code></pre>
<h3 id="3.-chaos-proxy-go-(go)" tabindex="-1"><a class="header-anchor" href="#3.-chaos-proxy-go-(go)">3. chaos-proxy-go (Go)</a></h3>
<p>chaos-proxy-go is a Go reimplementation of the same proxy concept, focused on performance and concurrency.</p>
<ul>
<li>chaos-proxy-go also listens on http://localhost:5000</li>
<li>It proxies requests to the same Caddy backend at http://localhost:8080</li>
<li>All core chaos features are supported, but custom JS/TS middleware is not</li>
<li>Started using the compiled Go binary</li>
</ul>
<p>Configuration Notes:</p>
<ul>
<li>Both proxies used the same minimal configuration to ensure a fair comparison.</li>
<li>No additional middleware or plugins were enabled during the benchmarks.</li>
<li>All tests used the <code>/api/hello</code> endpoint for consistency.</li>
<li>This setup allows for a direct, apples-to-apples comparison of the overhead introduced by each proxy implementation, as well as the baseline performance of the backend itself.</li>
<li>We are not testing the speed of the chaos features (latency injection, failures, etc.) here, just the raw proxy performance.</li>
</ul>
<h2 id="benchmarking-methodology" tabindex="-1"><a class="header-anchor" href="#benchmarking-methodology">Benchmarking Methodology</a></h2>
<p>To ensure a fair and transparent comparison, I used the same benchmarking tool, request pattern, and methodology for all scenarios. The backend was restarted between tests to clear any caches.</p>
<h3 id="test-command%3A" tabindex="-1"><a class="header-anchor" href="#test-command%3A">Test Command:</a></h3>
<p>For each scenario, I ran <code>hey -n 1000 -c 50 http://localhost:&lt;port&gt;/api/hello</code></p>
<p>Where:</p>
<ul>
<li><code>-n 1000</code>: Total number of requests per test run.</li>
<li><code>-c 50</code>: Number of concurrent clients (connections).</li>
<li><code>&lt;port&gt;</code>: 8080 for direct Caddy, 5000 for both chaos-proxy and chaos-proxy-go</li>
</ul>
<h3 id="reproducibility%3A" tabindex="-1"><a class="header-anchor" href="#reproducibility%3A">Reproducibility:</a></h3>
<p>All configuration files, commands, and system specs are included in this article. Anyone with a similar setup should be able to reproduce these results.</p>
<h2 id="results" tabindex="-1"><a class="header-anchor" href="#results">Results</a></h2>
<h3 id="1.-direct-to-caddy-(baseline)-1" tabindex="-1"><a class="header-anchor" href="#1.-direct-to-caddy-(baseline)-1">1. Direct to Caddy (Baseline)</a></h3>
<pre class="language-bash"><code class="language-bash">./hey <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">50</span> http://localhost:8080/api/hello

Summary:
  Total:        <span class="token number">0.0352</span> secs
  Slowest:      <span class="token number">0.0121</span> secs
  Fastest:      <span class="token number">0.0001</span> secs
  Average:      <span class="token number">0.0016</span> secs
  Requests/sec: <span class="token number">28383.8519</span>

  Total data:   <span class="token number">94000</span> bytes
  Size/request: <span class="token number">94</span> bytes

Response <span class="token function">time</span> histogram:
  <span class="token number">0.000</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.001</span> <span class="token punctuation">[</span><span class="token number">567</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.003</span> <span class="token punctuation">[</span><span class="token number">342</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.004</span> <span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– â– 
  <span class="token number">0.005</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.006</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.007</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– 
  <span class="token number">0.009</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>     <span class="token operator">|</span>â– 
  <span class="token number">0.010</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.011</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.012</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– 


Latency distribution:
  <span class="token number">10</span>% <span class="token keyword">in</span> <span class="token number">0.0002</span> secs
  <span class="token number">25</span>% <span class="token keyword">in</span> <span class="token number">0.0005</span> secs
  <span class="token number">50</span>% <span class="token keyword">in</span> <span class="token number">0.0012</span> secs
  <span class="token number">75</span>% <span class="token keyword">in</span> <span class="token number">0.0018</span> secs
  <span class="token number">90</span>% <span class="token keyword">in</span> <span class="token number">0.0024</span> secs
  <span class="token number">95</span>% <span class="token keyword">in</span> <span class="token number">0.0063</span> secs
  <span class="token number">99</span>% <span class="token keyword">in</span> <span class="token number">0.0116</span> secs

Details <span class="token punctuation">(</span>average, fastest, slowest<span class="token punctuation">)</span>:
  DNS+dialup:   <span class="token number">0.0002</span> secs, <span class="token number">0.0001</span> secs, <span class="token number">0.0121</span> secs
  DNS-lookup:   <span class="token number">0.0002</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0047</span> secs
  req write:    <span class="token number">0.0001</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0017</span> secs
  resp wait:    <span class="token number">0.0011</span> secs, <span class="token number">0.0001</span> secs, <span class="token number">0.0058</span> secs
  resp read:    <span class="token number">0.0002</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0016</span> secs

Status code distribution:
  <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span> <span class="token number">1000</span> responses
</code></pre>
<h3 id="2.-chaos-proxy-(node.js%2Fkoa)-1" tabindex="-1"><a class="header-anchor" href="#2.-chaos-proxy-(node.js%2Fkoa)-1">2. chaos-proxy (Node.js/Koa)</a></h3>
<pre class="language-bash"><code class="language-bash">./hey <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">50</span> http://localhost:5000/api/hello

Summary:
  Total:        <span class="token number">0.2346</span> secs
  Slowest:      <span class="token number">0.0430</span> secs
  Fastest:      <span class="token number">0.0049</span> secs
  Average:      <span class="token number">0.0115</span> secs
  Requests/sec: <span class="token number">4262.3420</span>

  Total data:   <span class="token number">94000</span> bytes
  Size/request: <span class="token number">94</span> bytes

Response <span class="token function">time</span> histogram:
  <span class="token number">0.005</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.009</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.013</span> <span class="token punctuation">[</span><span class="token number">880</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.016</span> <span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– â– â– 
  <span class="token number">0.020</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.024</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.028</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.032</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>    <span class="token operator">|</span>
  <span class="token number">0.035</span> <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– 
  <span class="token number">0.039</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.043</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>    <span class="token operator">|</span>


Latency distribution:
  <span class="token number">10</span>% <span class="token keyword">in</span> <span class="token number">0.0093</span> secs
  <span class="token number">25</span>% <span class="token keyword">in</span> <span class="token number">0.0097</span> secs
  <span class="token number">50</span>% <span class="token keyword">in</span> <span class="token number">0.0103</span> secs
  <span class="token number">75</span>% <span class="token keyword">in</span> <span class="token number">0.0110</span> secs
  <span class="token number">90</span>% <span class="token keyword">in</span> <span class="token number">0.0126</span> secs
  <span class="token number">95</span>% <span class="token keyword">in</span> <span class="token number">0.0224</span> secs
  <span class="token number">99</span>% <span class="token keyword">in</span> <span class="token number">0.0417</span> secs

Details <span class="token punctuation">(</span>average, fastest, slowest<span class="token punctuation">)</span>:
  DNS+dialup:   <span class="token number">0.0002</span> secs, <span class="token number">0.0049</span> secs, <span class="token number">0.0430</span> secs
  DNS-lookup:   <span class="token number">0.0002</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0046</span> secs
  req write:    <span class="token number">0.0000</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0002</span> secs
  resp wait:    <span class="token number">0.0112</span> secs, <span class="token number">0.0049</span> secs, <span class="token number">0.0370</span> secs
  resp read:    <span class="token number">0.0000</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0005</span> secs

Status code distribution:
  <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span> <span class="token number">1000</span> responses
</code></pre>
<h3 id="3.-chaos-proxy-go-(go)-1" tabindex="-1"><a class="header-anchor" href="#3.-chaos-proxy-go-(go)-1">3. chaos-proxy-go (Go)</a></h3>
<pre class="language-bash"><code class="language-bash">./hey <span class="token parameter variable">-n</span> <span class="token number">1000</span> <span class="token parameter variable">-c</span> <span class="token number">50</span> http://localhost:5000/api/hello

Summary:
  Total:        <span class="token number">0.1133</span> secs
  Slowest:      <span class="token number">0.0222</span> secs
  Fastest:      <span class="token number">0.0004</span> secs
  Average:      <span class="token number">0.0053</span> secs
  Requests/sec: <span class="token number">8828.0577</span>

  Total data:   <span class="token number">94000</span> bytes
  Size/request: <span class="token number">94</span> bytes

Response <span class="token function">time</span> histogram:
  <span class="token number">0.000</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.003</span> <span class="token punctuation">[</span><span class="token number">202</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.005</span> <span class="token punctuation">[</span><span class="token number">318</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.007</span> <span class="token punctuation">[</span><span class="token number">214</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.009</span> <span class="token punctuation">[</span><span class="token number">135</span><span class="token punctuation">]</span>   <span class="token operator">|</span>â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
  <span class="token number">0.011</span> <span class="token punctuation">[</span><span class="token number">59</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– â– â– â– â– â– â– 
  <span class="token number">0.013</span> <span class="token punctuation">[</span><span class="token number">57</span><span class="token punctuation">]</span>    <span class="token operator">|</span>â– â– â– â– â– â– â– 
  <span class="token number">0.016</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span>     <span class="token operator">|</span>â– 
  <span class="token number">0.018</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>     <span class="token operator">|</span>â– 
  <span class="token number">0.020</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>     <span class="token operator">|</span>
  <span class="token number">0.022</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>     <span class="token operator">|</span>


Latency distribution:
  <span class="token number">10</span>% <span class="token keyword">in</span> <span class="token number">0.0018</span> secs
  <span class="token number">25</span>% <span class="token keyword">in</span> <span class="token number">0.0028</span> secs
  <span class="token number">50</span>% <span class="token keyword">in</span> <span class="token number">0.0046</span> secs
  <span class="token number">75</span>% <span class="token keyword">in</span> <span class="token number">0.0071</span> secs
  <span class="token number">90</span>% <span class="token keyword">in</span> <span class="token number">0.0099</span> secs
  <span class="token number">95</span>% <span class="token keyword">in</span> <span class="token number">0.0118</span> secs
  <span class="token number">99</span>% <span class="token keyword">in</span> <span class="token number">0.0140</span> secs

Details <span class="token punctuation">(</span>average, fastest, slowest<span class="token punctuation">)</span>:
  DNS+dialup:   <span class="token number">0.0002</span> secs, <span class="token number">0.0004</span> secs, <span class="token number">0.0222</span> secs
  DNS-lookup:   <span class="token number">0.0002</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0046</span> secs
  req write:    <span class="token number">0.0000</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0009</span> secs
  resp wait:    <span class="token number">0.0048</span> secs, <span class="token number">0.0004</span> secs, <span class="token number">0.0157</span> secs
  resp read:    <span class="token number">0.0001</span> secs, <span class="token number">0.0000</span> secs, <span class="token number">0.0060</span> secs

Status code distribution:
  <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span> <span class="token number">1000</span> responses
</code></pre>
<h2 id="analysis" tabindex="-1"><a class="header-anchor" href="#analysis">Analysis</a></h2>
<p>The benchmark results highlight the performance impact of each proxy layer:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Requests/sec</th>
<th>Avg Latency (s)</th>
<th>99th %ile Latency (s)</th>
<th>Fastest (s)</th>
<th>Slowest (s)</th>
<th>Errors</th>
</tr>
</thead>
<tbody>
<tr>
<td>Direct to Caddy</td>
<td>28,384</td>
<td>0.0016</td>
<td>0.0116</td>
<td>0.0001</td>
<td>0.0121</td>
<td>0</td>
</tr>
<tr>
<td>chaos-proxy (Node.js)</td>
<td>4,262</td>
<td>0.0115</td>
<td>0.0417</td>
<td>0.0049</td>
<td>0.0430</td>
<td>0</td>
</tr>
<tr>
<td>chaos-proxy-go (Go)</td>
<td>8,828</td>
<td>0.0053</td>
<td>0.0140</td>
<td>0.0004</td>
<td>0.0222</td>
<td>0</td>
</tr>
</tbody>
</table>
<h3 id="key-observations" tabindex="-1"><a class="header-anchor" href="#key-observations">Key Observations</a></h3>
<ul>
<li>Unsurprisingly, direct to Caddy (baseline) achieved the highest throughput and lowest latency, as expected for a direct backend call.</li>
<li>chaos-proxy (Node.js) introduced significant overhead, reducing throughput by ~85% and increasing average latency by over 7x compared to direct Caddy. The 99th percentile latency was especially high, indicating more frequent slow requests under load.</li>
<li>chaos-proxy-go (Go) performed much closer to the baseline, with throughput more than double that of the Node.js version and average latency less than half. The 99th percentile latency was also much lower and the response time distribution was tighter, showing more consistent performance.</li>
</ul>
<h2 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion">Conclusion</a></h2>
<p>This benchmark demonstrates the performance advantages of using Go for an HTTP proxy compared to Node.js. While the original chaos-proxy in Node.js is highly extensible and integrates well with JS/TS applications, it incurs a substantial performance penalty under load.
If you need maximum performance and don't require custom JavaScript/TypeScript middleware, chaos-proxy-go is the clear winner. For teams prioritizing extensibility in JS/TS, the original chaos-proxy remains a flexible optionâ€”just be aware of the performance tradeoff.</p>

  </div>
</article>

  </div>
  </main>

  <!-- Footer -->
  <footer class="border-t border-gray-100 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 mt-20 transition-colors">
    <div class="max-w-4xl mx-auto px-6 py-12">
      <div class="text-center text-sm text-gray-600 dark:text-gray-300">
        <p>&copy; <span id="footer-year"></span> Gabor Koos</p>
      </div>
    </div>
  </footer>
  <!-- Theme Switcher Script -->
  <script>
    // Footer year
    document.getElementById('footer-year').textContent = new Date().getFullYear();
    // Theme switcher logic
    const root = document.documentElement;
    const themeToggle = document.getElementById('theme-toggle');
    const lightIcon = document.getElementById('theme-toggle-light');
    const darkIcon = document.getElementById('theme-toggle-dark');
    function setTheme(mode) {
      if (mode === 'dark') {
        root.classList.add('dark');
        localStorage.setItem('theme', 'dark');
        darkIcon.style.display = 'none';
        lightIcon.style.display = '';
      } else {
        root.classList.remove('dark');
        localStorage.setItem('theme', 'light');
        darkIcon.style.display = '';
        lightIcon.style.display = 'none';
      }
    }
    // Initial theme
    const userTheme = localStorage.getItem('theme');
    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (userTheme === 'dark' || (!userTheme && systemDark)) {
      setTheme('dark');
    } else {
      setTheme('light');
    }
    // Button is always visible; only icons are toggled
    themeToggle.addEventListener('click', () => {
    if (root.classList.contains('dark')) {
      setTheme('light');
    } else {
      setTheme('dark');
    }
    });
  </script>
</body>

<script>
document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('pre code').forEach(function (codeBlock) {
    var pre = codeBlock.parentNode;
    pre.style.position = 'relative';
    pre.style.overflow = 'auto';

    var button = document.createElement('button');
    button.className = 'copy-btn';
    button.type = 'button';
    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>';
    button.style = 'position:absolute;top:0.2em;right:0.2em;padding:0.05em 0.05em;width:1.2em;height:1.2em;display:flex;align-items:center;justify-content:center;background:#eee;border-radius:0.2em;border:none;cursor:pointer;z-index:1;opacity:0.7;box-shadow:0 2px 8px rgba(0,0,0,0.08);transition:opacity 0.2s;pointer-events:auto;';
    button.onmouseenter = function() { button.style.opacity = '1'; };
    button.onmouseleave = function() { button.style.opacity = '0.7'; };
    pre.appendChild(button);
    button.addEventListener('click', function () {
      navigator.clipboard.writeText(codeBlock.innerText);
      var original = button.innerHTML;
      button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#16a34a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';
      setTimeout(function () {
        button.innerHTML = original;
      }, 1200);
    });
  });
});
</script>

</body>
</html>
